{{% BLOCKS }}
{{<layout}}
{{$content}}
<a href="/issues/new"class="btn btn-small btn-success create-new">Create new Issue</a>
<br><br>
<div class="panel panel-default">

    <div class="panel-heading"><h2>Reported Issues</h2></div>

    <!-- Table -->
    <table class="table">
        <thead>
            <tr>
                <th>Title</th>
                <th>Description</th>
                <th>parents</th>
                <th>Status</th>
                <th colspan="2">Actions</th>
            </tr>
        </thead>
        <tbody>
            {{#issues}}
            <tr>
                <td>{{title}}</td>
                <td>{{description}}</td>
                <td>{{#parent3}}{{#parent2}}{{#parent1}}{{title}} > {{/parent1}}{{title}} > {{/parent2}}{{title}}{{/parent3}}</td>
                <td>{{statusText}}</td>
                <td>
                    <a href="/issues/view/{{id}}" data-toggle="tooltip" data-placement="left" title="view"><span class="glyphicon glyphicon-eye-open"></span></a>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    {{#isAdmin}}
                    {{#status}}
                    <a href="" data-toggle="modal" data-target="#closeIssue_{{id}}" data-placement="left" title="close"><span class="glyphicon glyphicon-ban-circle"></span></a>

                    <div class="modal fade" id="closeIssue_{{id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Warning</h4>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to close this issue ?!
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Dismiss this message</button>
                                    <a  href="/issues/close/{{id}}" type="button" class="btn btn-primary">Close Issue</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/status}}
                    {{^status}}
                    <a href="" data-toggle="modal" data-target="#reopenIssue_{{id}}" data-placement="left" title="reopen"><span class=" glyphicon glyphicon-refresh"></span></a>

                    <div class="modal fade" id="reopenIssue_{{id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Warning</h4>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to reopen this issue ?!
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Dismiss this message</button>
                                    <a  href="/issues/reopen/{{id}}" type="button" class="btn btn-primary">Reopen Issue</a>
                                </div>
                            </div>
                        </div>
                    </div>    
                    {{/status}}
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <a href="" data-toggle="modal" data-target="#deleteIssue_{{id}}" data-toggle="tooltip" data-placement="left" title="delete"><span class="glyphicon glyphicon-remove"></span></a>
                    
                    <div class="modal fade" id="deleteIssue_{{id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Warning</h4>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to delete this issue ?!
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Dismiss this message</button>
                                    <a  href="/issues/delete/{{id}}" type="button" class="btn btn-primary">Delete Issue</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{/isAdmin}}
                </td>
            </tr>
            {{/issues}}
            </td>
            </tr>
        </tbody>
    </table>
</div>
{{#hasPages}}
<div class="pagination-bar">
    <p > Pages :  </p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <ul class="pagination">
        {{#previousPageNumber}}
        <li >
            <a href="?page={{previousPageNumber}}{{#filterQuery}}&{{filterQuery}}{{/filterQuery}}"><span class="glyphicon glyphicon-menu-left"></span></a>
        </li>
        {{/previousPageNumber}}
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        {{#pageNumbers}}
        <li {{#isCurrent}}class="active"{{/isCurrent}} >
            <a href="?page={{pageNumber}}{{#filterQuery}}&{{filterQuery}}{{/filterQuery}}">{{pageNumber}}</a>
        </li>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        {{/pageNumbers}}
        {{#nextPageNumber}}
        <li >
            <a href="?page={{nextPageNumber}}{{#filterQuery}}&{{filterQuery}}{{/filterQuery}}"><span class="glyphicon glyphicon-menu-right"></span></a>
        </li>
        {{/nextPageNumber}}
    </ul>
</div>
<br>
{{/hasPages}}
{{/content}}
{{/layout}}
